<div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4">
  <div class="flex items-center justify-between mb-4">
    <h4 class="text-md font-semibold text-theme">
      <%= audience.persisted? ? "Audience ##{index + 1}" : "New Audience" %>
    </h4>
    <% if audience.persisted? %>
      <%= form.check_box :_destroy, { class: "hidden destroy-checkbox" }, "1", "0" %>
      <button type="button" class="text-red-600 hover:text-red-800 text-sm font-medium remove-audience-btn">
        Remove
      </button>
    <% end %>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="space-y-2">
      <%= form.label :name, "Audience Name", class: "block text-sm font-medium text-theme" %>
      <%= form.text_field :name,
            placeholder: "e.g., Young Professionals, Tech Enthusiasts",
            class: "form-input w-full" %>
    </div>

    <div class="md:col-span-2 space-y-4">
      <label class="block text-sm font-medium text-theme">Demographics</label>
      <div class="bg-white border rounded-lg p-4 space-y-3">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <!-- Age Range -->
          <div class="space-y-2">
            <label class="block text-xs font-medium text-gray-700">Age Range</label>
            <select class="form-input w-full text-sm demographic-field"
                    data-field="age_range"
                    data-current="<%= demographic_field_value('age_range') %>">
              <option value="">Select age range</option>
              <option value="13-17">13-17</option>
              <option value="18-24">18-24</option>
              <option value="25-34">25-34</option>
              <option value="35-44">35-44</option>
              <option value="45-54">45-54</option>
              <option value="55-64">55-64</option>
              <option value="65+">65+</option>
            </select>
          </div>

          <!-- Gender -->
          <div class="space-y-2">
            <label class="block text-xs font-medium text-gray-700">Gender</label>
            <select class="form-input w-full text-sm demographic-field"
                    data-field="gender"
                    data-current="<%= demographic_field_value('gender') %>">
              <option value="">Select gender</option>
              <option value="all">All genders</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="non_binary">Non-binary</option>
              <option value="other">Other</option>
            </select>
          </div>

          <!-- Location Type -->
          <div class="space-y-2">
            <label class="block text-xs font-medium text-gray-700">Location Type</label>
            <select class="form-input w-full text-sm demographic-field"
                    data-field="location_type"
                    data-current="<%= demographic_field_value('location_type') %>">
              <option value="">Select location type</option>
              <option value="global">Global</option>
              <option value="urban">Urban areas</option>
              <option value="suburban">Suburban areas</option>
              <option value="rural">Rural areas</option>
              <option value="metropolitan">Metropolitan areas</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Specific Location -->
          <div class="space-y-2">
            <label class="block text-xs font-medium text-gray-700">Specific Location</label>
            <input type="text"
                   class="form-input w-full text-sm demographic-field"
                   data-field="location"
                   value="<%= demographic_field_value('location') %>"
                   placeholder="e.g., United States, Europe, Latin America"
                   autocomplete=nope>
          </div>

          <!-- Income Level -->
          <div class="space-y-2">
            <label class="block text-xs font-medium text-gray-700">Income Level</label>
            <select class="form-input w-full text-sm demographic-field"
                    data-field="income"
                    data-current="<%= demographic_field_value('income') %>">
              <option value="">Select income level</option>
              <option value="low">Low income</option>
              <option value="lower_middle">Lower middle class</option>
              <option value="middle">Middle class</option>
              <option value="upper_middle">Upper middle class</option>
              <option value="high">High income</option>
            </select>
          </div>
        </div>

        <!-- Hidden field to store the JSON -->
        <%= form.hidden_field :demographic_profile, value: demographic_profile_value, class: "demographic-json-field" %>
      </div>
    </div>

    <div class="space-y-2">
      <%= form.label :interests, "Interests", class: "block text-sm font-medium text-theme" %>
      <%= form.text_field :interests,
            value: interests_value,
            placeholder: "technology, fitness, travel, food",
            class: "form-input w-full" %>
      <p class="text-xs text-gray-500">Separate with commas</p>
    </div>

    <div class="space-y-2">
      <%= form.label :digital_behavior, "Digital Behavior", class: "block text-sm font-medium text-theme" %>
      <%= form.text_field :digital_behavior,
            value: digital_behavior_value,
            placeholder: "social_media_active, online_shopper, early_adopter",
            class: "form-input w-full" %>
      <p class="text-xs text-gray-500">Separate with commas</p>
    </div>
  </div>
</div>
